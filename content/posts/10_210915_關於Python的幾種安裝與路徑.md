---
title: "[Python]é—œæ–¼ Python çš„å¹¾ç¨®å®‰è£èˆ‡è·¯å¾‘(Python Install & PATH)"
subtitle: "Python Install & PATH"
date: 2021-09-15T18:36:14+08:00
draft: false
url: "posts/10/210915/é—œæ–¼Pythonçš„å¹¾ç¨®å®‰è£èˆ‡è·¯å¾‘(Python Install & PATH)"
summary: <p align="center">é—œæ–¼ Python çš„å¹¾ç¨®å®‰è£èˆ‡è·¯å¾‘(Python Install & PATH)</p> <img src="/blog/images/10_210915/10_210915_pythoninstallandpath.png" width="40%"/>
author: "linooohon"
email: "linooohon@gmail.com"
toc: true
tags: ["Python", "Pyenv", "Conda"]
categories: ["2021", "python"]
---

<h1 style="text-align:center">
é—œæ–¼ Python çš„å¹¾ç¨®å®‰è£èˆ‡è·¯å¾‘(Python Install & PATH)
</h1>

> åœ¨å¹«åŠ©å…¬å¸å»ºç«‹ data monorepo çš„éç¨‹ï¼Œæ±ºå®šæŠŠ Python çš„ä¸€äº›ç›¸é—œå®‰è£å’Œè·¯å¾‘ç­†è¨˜èµ·ä¾†ã€‚

![é—œæ–¼ Python çš„å¹¾ç¨®å®‰è£èˆ‡è·¯å¾‘(Python Install & PATH)](/blog/images/10_210915/10_210915_pythoninstallandpath.png)

## **< ä¸€. Python on MacOS Docs >**:

Using Python on a Mac [Python Docs](https://docs.python.org/3/using/mac.html)

## **< äºŒ. å®‰è£åŠè·¯å¾‘ >**:

### - ä½œæ¥­ç³»çµ±æœ¬èº«å°±æœ‰çš„ Python(Apple-provided build of Python):ä¸€ç¨®

#### 1. Apple-provided build of Python

- `Python.framework` folder:
    - Path:`/System/Library/Frameworks/Python.framework`

- ä¸€äº› Symlink file å’Œ ä¸€å€‹ Regular file `python3` (å°±æˆ‘çš„æŸ¥çœ‹çµæœ)
    - Path: `/usr/bin/python`
    ![](https://i.imgur.com/ZZRI4Ju.png)


> By Default, ä¸€èˆ¬æœƒæ˜¯ Python 2.7 å·²ç¶“è¢« Apple å…ˆå®‰è£äº†ï¼Œæ‰€ä»¥ä¸Šé¢çš„æª”æ¡ˆæ‰æœƒçœ‹èµ·ä¾†éƒ½æ˜¯ 2 çš„æ±è¥¿


> æ ¹æ“š [python.org](https://www.python.org/downloads/)
![](https://i.imgur.com/9DLDTFE.png)



ä½†ç›®å‰é–‹ç™¼å¤§éƒ½æ˜¯ç”¨ Python3 äº†, Python2 ä¹Ÿä¸å†è¢« Supportï¼ŒPython3.6 ä¹Ÿåª Support åˆ° 2021 å¹´åº•ï¼Œæ‰€ä»¥åº•ä¸‹åˆ†åˆ¥æ­¸é¡ä¸€äº› Python developer å¤§å¤šæœƒä½¿ç”¨çš„å®‰è£æ–¹å¼ã€‚


<p style="color:#fc3503">æ³¨æ„:</p>

æ ¹æ“š Python å®˜æ–¹èªªæ³•ï¼ŒApple-provided build of Python æ˜¯å…§å»º Python ä¸è©²å»ç§»å‹•ä¿®æ”¹å®ƒï¼Œå› ç‚ºå®ƒæœ‰å¯èƒ½è¢« MacOS ç³»çµ±åŠå…¶ä»– 3 party æ‰€éœ€è¦ã€‚


### - User è‡ªè¡Œå®‰è£(User build of Python):å¥½å¹¾ç¨®

#### 1. Python å®˜ç¶²ä¸‹è¼‰(Universal Binary build of Python)[python.org](https://www.python.org/downloads/)

ä¸‹è¼‰ä¹‹å¾Œæœƒæœ‰çš„æ±è¥¿:

- `Python 3.9` folder:
    - Path: `/Applications/`
    - è£¡é¢æœ‰:
        - IDLE(Integrated Development and Learning Environment): Python çš„æ•´åˆé–‹ç™¼èˆ‡å­¸ç¿’ç’°å¢ƒï¼Œç°¡å–®ä¾†èªªå°±æ˜¯æ’°å¯« Python ç¨‹å¼çš„å·¥å…·ï¼Œæ‰“é–‹å¾Œå¯ä»¥åœ¨ shell window å¯« Python code
        - Python Launcher: è™•ç†åŸ·è¡Œ python script çš„ä½œæ¥­
        
        
        [Refer to 5.1.1: How to run a Python script](https://docs.python.org/3/using/mac.html#how-to-run-a-python-script)
        
        <p style="color: #4455dd">
        > To run your script from the Finder you have two options:
        </p>
        <p style="color: #dd3ddd">
            1. Drag it to PythonLauncher<br>
            2. Select PythonLauncher as the default application to open your script (or any .py script) through the finder Info window and double-click it. PythonLauncher has various preferences to control how your script is launched. Option-dragging allows you to change these for one invocation, or use its Preferences menu to change things globally.
        </p>
        
- `Python.framework` folder: 
    - Path: `/Library/Frameworks/Python.framework`
    - è£¡é¢æœ‰: 
        - Python executable code å’Œ libraries.

- Symlink file:
    - Path: åœ¨ `/usr/local/bin/`
    - æŒ‡å‘ `/Library/Frameworks/Python.framework`
    - è£¡é¢æœ‰(å‡è¨­install çš„æ˜¯ python3.9):
        - 2to3:`../../../Library/Frameworks/Python.framework/Versions/3.9/bin/2to3`
        - 2to3-3.9:`../../../Library/Frameworks/Python.framework/Versions/3.9/bin/2to3-3.9`
        - idle3:`../../../Library/Frameworks/Python.framework/Versions/3.9/bin/idle3`
        - idle3.9:`../../../Library/Frameworks/Python.framework/Versions/3.9/bin/idle3.9`
        - pip3:`../../../Library/Frameworks/Python.framework/Versions/3.9/bin/pip3`
        - pip3.9: `../../../Library/Frameworks/Python.framework/Versions/3.9/bin/pip3.9`
        - pydoc3: `../../../Library/Frameworks/Python.framework/Versions/3.9/bin/pydoc3`
        - pydoc3.9:
        `../../../Library/Frameworks/Python.framework/Versions/3.9/bin/pydoc3.9`
        - python3:
        `../../../Library/Frameworks/Python.framework/Versions/3.9/bin/python3`
        - python3-config:
        `../../../Library/Frameworks/Python.framework/Versions/3.9/bin/python3-config`
        - python3.9:
        `../../../Library/Frameworks/Python.framework/Versions/3.9/bin/python3.9`
        - python3.9-config:
        `../../../Library/Frameworks/Python.framework/Versions/3.9/bin/python3.9-config`
        
- ç¢ºèªç‰ˆæœ¬: 
    - åªè¦å»`Python 3.9`folder æ‰“é–‹ IDLE å°±å¯ä»¥çœ‹å‡ºä¾†æ˜¯ 3.x.xã€‚

- ç§»é™¤å®˜æ–¹ä¸‹è¼‰çš„ Python:
    - åŒç†ï¼Œç§»é™¤ä¸‰æ¨£æ±è¥¿å°±è¡Œï¼Œ
        - ç§»é™¤ folder `/Applications/Python 3.9/`
        - ç§»é™¤ folder `/Library/Frameworks/Python.framework/`
        - ç§»é™¤ `/usr/local/bin/` åº•ä¸‹çš„æ‰€æœ‰ Symlink (æ•¸å€‹)





#### 2. Homebrew å®‰è£

ex: è©¦è‘—å®‰è£æœ€è¿‘ release çš„ python3.10:

```bash
brew install python@3.10
# Homebrew æœƒå®‰è£éœ€è¦çš„æ‰€æœ‰ dependencies
```

Homebrew æœƒè£åœ¨ `/usr/local/Cellar` åº•ä¸‹ï¼Œç¶“éæŸ¥çœ‹ç™¼ç¾å¤šäº†å¾ˆå¤šæ±è¥¿ğŸ¥²:
- ca-certificates
- gdbm
- libnghttp2
- mpdecimal
- python@3.10
- python@3.9
- sqlite

åŒæ™‚ä¹Ÿæœƒåœ¨ `/usr/local/bin` å»ºç«‹ä¸€äº› symlink




#### 3. Pyenv å®‰è£
å¦‚æœä½¿ç”¨ Homebrew å®‰è£ Pyenv çš„è©±ï¼Œæœ¬èº« Pyenv çš„ source code ä¹Ÿæ˜¯åœ¨ `usr/local/Cellar/pyenv/` [source code](https://github.com/pyenv/pyenv)


##### ä¸€é–‹å§‹å…ˆ init [source code](https://github.com/pyenv/pyenv/blob/master/libexec/pyenv-init):

```bash
## æ”¾åˆ° ~/.zshrc æˆ–æ˜¯ ~/.bash_profile
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"

```
- é€™è£¡æœƒä¿®æ”¹ PATH ç’°å¢ƒè®Šæ•¸ï¼ŒåŠ å…¥ ${PYENV_ROOT}/shims/ï¼Œä½¿å¾—ä¹‹å¾ŒæŒ‡ä»¤æœƒå…ˆé¸æ“‡ shims è£¡çš„æŒ‡ä»¤åŸ·è¡Œï¼Œå…¶ä»–è©³ç´°çš„å†ç ”è®€åŸå§‹ç¢¼ã€‚





##### é‡æ–°å•Ÿå‹• shell:

```
exec "$SHELL"
```

```
pyenv install -v <æƒ³è¦çš„ç‰ˆæœ¬>
```
è‡³æ–¼ä½¿ç”¨ Pyenv å®‰è£ Python çš„è©±ï¼Œæœƒæ˜¯åœ¨:

```
~/.pyenv/ 
```
åº•ä¸‹ç”Ÿå‡ºä¾†ã€‚


##### pyenv åˆ‡æ› python ç‰ˆæœ¬æ–¹å¼:

```bash
pyenv global <ç‰ˆæœ¬> ##å…¨åŸŸ
pyenv local <ç‰ˆæœ¬> ##æ­¤è³‡æ–™å¤¾
```
##### æŸ¥çœ‹ pyenv åˆ‡æ›æœ‰ç„¡æˆåŠŸ:

```
pyenv versions
python --version
```

##### æŸ¥çœ‹ python è·¯å¾‘:

```
pyenv which python
```

å¦‚æœå–®ç´”ä½¿ç”¨ `which python` æ˜¯çœ‹ä¸å‡ºä¾†çš„ã€‚æœƒå¾—åˆ° ~/.pyenv/shimsï¼Œé‚£ shims è£¡é¢çš„å…§å®¹å…¶å¯¦å°±æ˜¯ä¸€å€‹æ¥æ”¶çš„äººï¼Œè² è²¬è½‰æ›ã€‚

`shims` folder ä¸»è¦å°±æ˜¯è² è²¬æ¥æ”¶è¼¸å…¥ pyenv command æ™‚çš„åƒæ•¸ï¼Œæ‰€ä»¥åœ¨ä¸€é–‹å§‹ init çš„æ™‚å€™å°±æœ‰ config äº†ã€‚

`pyenv exec`: `shims` æœƒæŠŠè©²å¸¶çš„åƒæ•¸ä¸Ÿçµ¦ `pyenv exec` åŸ·è¡Œã€‚[source code](https://github.com/pyenv/pyenv/blob/master/libexec/pyenv-exec)

```bash
export PYENV_VERSION
PYENV_COMMAND_PATH="$(pyenv-which "$PYENV_COMMAND")"
PYENV_BIN_PATH="${PYENV_COMMAND_PATH%/*}"

OLDIFS="$IFS"
IFS=$'\n' scripts=(`pyenv-hooks exec`)
IFS="$OLDIFS"
for script in "${scripts[@]}"; do
  source "$script"
done
```








#### 4. Conda

å¯ä»¥é€é Anaconda æˆ–æ˜¯ Miniconda
ï¼Œæˆ‘è‡ªå·±æ˜¯ä½¿ç”¨ Miniconda

##### ç¬¬ä¸€ç¨®. Default PATH å®‰è£:
```bash
conda create --name <ç’°å¢ƒå> python=3.7
# e.g.
conda create --name python3.7 python=3.7
```

- å¦‚æ­¤ Python å°±æœƒè¢«å®‰è£åœ¨`~/opt/miniconda3/envs/` åº•ä¸‹:
    - PATH: `~/opt/miniconda3/envs/python3.7/bin/python`


##### ç¬¬äºŒç¨®. åœ¨è‡ªå·±ç›®å‰æ‰€åœ¨çš„ folder è£¡å®‰è£ Python:
```bash
conda create --prefix <envåå­—> python=<æƒ³è¦è£çš„pythonç‰ˆæœ¬>
# e.g.
conda create --prefix conda_env python=3.8
```

é€™æ™‚å°±æœƒåœ¨ç•¶å‰ç›®éŒ„ç”Ÿå‡ºåŒ…å« python3.8 çš„ç’°å¢ƒ:
```
`root/`
    |___`conda_env/`
            |___`bin/`
            |___`conda-meta/`
            |___`include/`
            |___`lib/`
            |___`share/`
            |___`ssl/`
```


###### é€²å…¥ç’°å¢ƒ:

```
conda activate ./conda_env
```
```bash
python -V
# æœƒç™¼ç¾ç‰ˆæœ¬å·²ç¶“åˆ‡æ›æˆå‰›å‰›çš„éœ€æ±‚ python=3.8
```
```bash
which python
# æœƒç™¼ç¾ python çš„è·¯å¾‘å·²ç¶“æ˜¯ç•¶å‰ç›®éŒ„ `conda_env/bin/python`
```



###### æŠŠç›®å‰ç’°å¢ƒæ‰“åŒ…æˆ yml æª”:

```
conda env export --prefix ./conda_env > environment.yml
```
###### ä¾ç…§ç•¶å‰ yml æª”ï¼ŒæŠŠç’°å¢ƒå»ºç«‹åœ¨ç•¶å‰ç›¸åŒè·¯å¾‘ä¸‹:
```
conda env create --prefix ./conda_env --file environment.yml
```

###### ä¾ç…§ç•¶å‰ yml æª”ï¼ŒæŠŠç’°å¢ƒå»ºç«‹åœ¨ Conda çš„ Default Path:

```bash
conda env create --file environment.yml
# OR: conda env create --file <yamlæª”å> --name <æƒ³å»ºæˆçš„ç’°å¢ƒè³‡æ–™å¤¾å>
# e.g
conda env create --file environment.yml --name env_from_yml
```
ä½†æ˜¯è¨˜å¾— yml çš„ name è¦ä¿®æ”¹ä¸€ä¸‹ï¼Œé€™æœƒæ˜¯ä¹‹å¾Œè£åœ¨ `opt/miniconda3/envs` åº•ä¸‹çš„ folder åå­—ã€‚

![](https://i.imgur.com/opuGaJs.png)


## **< The End >**:

### Self Checklist:
- [x]How to install Python through different ways.
- [x]What is Environment Variable `$PATH`.
- [x]The meaning of `echo $PATH` .
- [x]What is the difference between `pyenv python` and `Apple-provided build of Python`.
- [x]Understand all the path where python will be placed when download python.
- [x]Understand what is `symlink`.
- [x]Understand what is `IDLE`.
- [x]Understand what is `Python Launcher`.


### Reference:
- [PyConTW DevTeamçš„å¤§å¤§-Josix](https://josix.tw/pyenv-deep-dive/)
- [Conda Docs](https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#cloning-an-environment)
- [Python Docs](https://docs.python.org/3/using/mac.html#how-to-run-a-python-script)
- [Denis Hsieh](https://medium.com/denix-daily/macos%E4%B8%8A%E7%9A%84python%E8%B7%AF%E5%BE%91%E5%95%8F%E9%A1%8C-%E5%AE%89%E8%A3%9D%E6%96%B9%E6%B3%95-a10c01cc42a)

## **< Next ä¸‹ä¸€ç¯‡ >**:
<!-- <a href="/blog/posts/08/210805/pythonçš„yieldå’Œscrapyçš„yield">Python è§€å¿µ(2) yield æ˜¯ä»€éº¼?ï¼Œé‚£Scrapy è£¡çš„ yield?</a> -->
